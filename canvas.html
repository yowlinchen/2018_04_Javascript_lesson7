<!DOCTYPE html>
<html lang="en">

<head>
    <title>Animation</title>
    <script>
        var smoke;
        var ctx;
        var drawables;
        // control first rect
        window.addEventListener("load", function () {
            // loading resources.  Load the resources in the early stage 
            smoke = new Image();
            smoke.src = "./smoke.png";
            smoke.onload = function () {
                // prepare data
                ctx = document.getElementById("cvs").getContext("2d");
                drawables = []; // new Array()
                window.setInterval(refresh, 10);
            };
        });

        function refresh() {
            for (var i = 0; i < drawables.length; i++) {
                var dead = drawables[i].update();
                if (dead) {
                    drawables.splice(i, 1);
                    i--;
                }
            }
            // clear data
            ctx.clearRect(0, 0, ctx.canvas.width, ctx.canvas.height);
            // redraw
            for (var i = 0; i < drawables.length; i++) {
                drawables[i].draw();
            }
        }
    </script>
</head>

<body>
    <h3>Animation</h3>
    <canvas id="cvs" width="600" height="450"></canvas>

</body>

</html>